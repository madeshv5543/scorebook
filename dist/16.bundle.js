(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{301:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(385))},302:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(386))},347:function(e,t,n){"use strict";var r,a,c,o,i,s=n(404),u=function(e,t){window.subscriptions&&window.subscriptions.publish(e,t)},l=function(e,t){window.subscriptions&&window.subscriptions.publish(e,t)};n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i}),function(e){e[e.AllUpdates=0]="AllUpdates",e[e.Scorecard=1]="Scorecard"}(o||(o={})),function(e){e[e.MatchIds=0]="MatchIds",e[e.MatchId=1]="MatchId",e[e.MatchUpdates=2]="MatchUpdates",e[e.NewMatch=3]="NewMatch",e[e.ScorecardUpdate=4]="ScorecardUpdate"}(i||(i={}));var f=((r={})[o.AllUpdates]="/matchupdates",r[o.Scorecard]="/scorecards",r),d=((a={})[o.AllUpdates]="matchids",a[o.Scorecard]="matchid",a),h=((c={})[i.MatchUpdates]="matchupdates",c[i.NewMatch]="newmatch",c[i.ScorecardUpdate]="scorecardupdate",c);t.c=function(e,t){return function(n,r){var a=e.socketio?function(e){var t=s(e);return t.on("connect",function(){return u("connected")}),t.on("disconnect",function(e){"io client disconnect"!==e&&u("disconnected")}),t.on("connect_error",function(){return u("disconnected")}),t}(""+e.url+f[t]):function(e){var t={},n=new WebSocket(e);n.onopen=function(){return l("connected")},n.onmessage=function(e){console.log("socket data",e);var n=JSON.parse(e.data),r=t[n.action];r&&r(n.updates)};return{emit:function(e,t){var r;n.readyState===n.OPEN?n.send(JSON.stringify(((r={action:e})[e]=t,r))):n.onopen=function(){var r;l("connected"),n.send(JSON.stringify(((r={action:e})[e]=t,r)))}},disconnect:function(){n&&n.close()},on:function(e,n){console.log(e),t[e]=n}}}(e.url),c=function(){return a.emit(d[t],n())};return a.on("reconnect",c),r.forEach(function(e){var t=e.event,n=e.action,r=e.resubscribe;return a.on(h[t],function(e){n(e),r&&c()})}),c(),function(){return a.disconnect()}}}},385:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(3)),c=r(n(4)),o=r(n(0)),i=(r(n(2)),r(n(9))),s=r(n(32)),u=r(n(6)),l={root:{overflow:"hidden"}};function f(e){var t=e.classes,n=e.className,r=e.raised,u=(0,c.default)(e,["classes","className","raised"]);return o.default.createElement(s.default,(0,a.default)({className:(0,i.default)(t.root,n),elevation:r?8:1},u))}t.styles=l,f.defaultProps={raised:!1};var d=(0,u.default)(l,{name:"MuiCard"})(f);t.default=d},386:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var a=r(n(3)),c=r(n(4)),o=r(n(0)),i=(r(n(2)),r(n(9))),s=(n(8),r(n(6))),u={root:{padding:16,"&:last-child":{paddingBottom:24}}};function l(e){var t=e.classes,n=e.className,r=e.component,s=(0,c.default)(e,["classes","className","component"]);return o.default.createElement(r,(0,a.default)({className:(0,i.default)(t.root,n)},s))}t.styles=u,l.defaultProps={component:"div"};var f=(0,s.default)(u,{name:"MuiCardContent"})(l);t.default=f},398:function(e,t,n){"use strict";t.a=function(e){var t;return new Date(e)<((t=new Date).setDate(t.getDate()-6),t)}},402:function(e,t,n){"use strict";t.a=function(e){var t,n,r;return{rootStyle:(t={marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},t[e.breakpoints.up(1100+3*e.spacing.unit*2)]={width:1100,marginLeft:"auto",marginRight:"auto"},t),paperStyle:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,marginBottom:4*e.spacing.unit},mainContentStyle:(n={padding:6*e.spacing.unit+"px"},n[e.breakpoints.up("md")]={paddingRight:0},n),toolbar:e.mixins.toolbar,logoStyle:{maxHeight:"200px",margin:"30px"},linkStyle:{color:e.palette.primary.contrastText},cardStyle:{display:"flex"},cardDetailsStyle:{flex:1},headerStyle:(r={width:"100%",padding:2*e.spacing.unit+"px"},r[e.breakpoints.up("md")]={paddingRight:0},r),addButton:{marginRight:e.spacing.unit}}}},403:function(e,t,n){"use strict";var r=n(0),a=n(347),c=n(18),o=n(82),i=n(79),s=n(75),u=n(398),l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},f=function(e,t,n,r){return new(n||(n=Promise))(function(a,c){function o(e){try{s(r.next(e))}catch(e){c(e)}}function i(e){try{s(r.throw(e))}catch(e){c(e)}}function s(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,i)}s((r=r.apply(e,t||[])).next())})},d=function(e,t){var n,r,a,c,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function i(c){return function(i){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}};t.a=function(e,t){var n=Object(o.a)(Object(i.a)(3,1e3)),h=Object(a.c)(Object({url:"https://cric-scorebook.herokuapp.com",socketio:!0}),a.b.AllUpdates),p=r.useState(Object(s.a)(localStorage).getMatch())[0],m=r.useState([]),v=m[0],y=m[1],b=r.useState(!0),g=b[0],w=b[1],E=r.useState([]),S=E[0],M=E[1],k=r.useState(void 0),O=k[0],x=k[1],j=r.useRef(void 0),C=r.useRef(void 0),P=function(e){return void 0===t?e:function(e,t){return e.slice().sort(function(e,n){return e.user===t?-1:n.user===t?1:0})}(e,t.id)},T=function(e){j.current=h(function(){return e.map(function(e){return e.id})},[{event:a.a.MatchUpdates,action:M},{event:a.a.NewMatch,action:x,resubscribe:!0}])},N=function(){C.current&&(clearTimeout(C.current),C.current=void 0)},R=function(e,n){var r=function(e){return!e||e.match.complete?void 0:{id:e.match.id,date:e.match.date,user:e.match.user,homeTeam:e.match.homeTeam.name,awayTeam:e.match.awayTeam.name,status:e.match.status,version:e.version,lastEvent:e.lastEvent}}(p);if(!r)return e;if(!(r&&(void 0===r.user||void 0!==t&&t.id===r.user)&&!Object(u.a)(r.date)&&(void 0===r.id||n||!!e.find(function(e){return e.id===r.id}))))return e;var a=e.find(function(e){return e.id===r.id});return a&&a.version>r.version?e:e.filter(function(e){return e!==a}).concat(r)},_=function(){return f(void 0,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),N(),w(!0),[4,n.getInProgressMatches()];case 1:return e=t.sent(),y(P(R(e))),w(!1),T(e),[3,3];case 2:return t.sent(),y(P(R([],!0))),w(!1),U(),[3,3];case 3:return[2]}})})},U=function(){C.current=setTimeout(_,6e4)};return r.useEffect(function(){y(v.map(function(e){var t=S.find(function(t){return t.id===e.id});return void 0===t?e:l({},e,{status:t.status,lastEvent:t.lastEvent})}))},[S]),r.useEffect(function(){if(O){j.current&&j.current();var e=v.concat([O]);y(e),T(e.map(function(e){return e}))}},[O]),r.useEffect(function(){return e===c.b?_():(w(!1),y(P(R([],!0))),U()),function(){j.current&&j.current()}},[e]),r.useEffect(function(){return N},[]),[v,g,function(e){return f(void 0,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return p&&p.match.id===e&&Object(s.a)(localStorage).removeMatch(),e?[4,n.removeMatch(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return y(v.filter(function(t){return t.id!==e})),[2]}})})}]}},410:function(e,t){},467:function(e,t,n){e.exports=n.p+"icon_192.png"},567:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(32),o=n.n(c),i=n(40),s=n.n(i),u=n(6),l=n.n(u),f=n(15),d=n.n(f),h=n(301),p=n.n(h),m=n(302),v=n.n(m),y=n(21),b=n.n(y),g=n(2),w=n.n(g),E=n(30),S=n.n(E),M=n(121),k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var x=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},j=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,c=Array(a),o=0;o<a;o++)c[o]=arguments[o];return n=r=O(this,e.call.apply(e,[this].concat(c))),r.handleClick=function(e){if(r.props.onClick&&r.props.onClick(e),!e.defaultPrevented&&0===e.button&&!r.props.target&&!x(e)){e.preventDefault();var t=r.context.router.history,n=r.props,a=n.replace,c=n.to;a?t.replace(c):t.push(c)}},O(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),n=e.innerRef,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["replace","to","innerRef"]);S()(this.context.router,"You should not use <Link> outside a <Router>"),S()(void 0!==t,'You must specify the "to" property');var c=this.context.router.history,o="string"==typeof t?Object(M.b)(t,null,null,c.location):t,i=c.createHref(o);return a.a.createElement("a",k({},r,{onClick:this.handleClick,href:i,ref:n}))},t}(a.a.Component);j.propTypes={onClick:w.a.func,target:w.a.string,replace:w.a.bool,to:w.a.oneOfType([w.a.string,w.a.object]).isRequired,innerRef:w.a.oneOfType([w.a.string,w.a.func])},j.defaultProps={replace:!1},j.contextTypes={router:w.a.shape({history:w.a.shape({push:w.a.func.isRequired,replace:w.a.func.isRequired,createHref:w.a.func.isRequired}).isRequired}).isRequired};var C=j,P=n(81),T=n.n(P),N=n(60),R=n.n(N),_=function(e){var t=r.useState(0),n=t[0],a=t[1],c=r.useState(!1),o=c[0],i=c[1],s=r.useRef(void 0),u=function(){n>=e.inProgressMatches.length-1?a(0):a(n+1),l()},l=function(){s.current=setTimeout(u,4e3)};return r.useEffect(function(){if(!o&&0!==e.inProgressMatches.length)return a(0),i(!0),l(),function(){s.current&&clearTimeout(s.current)}}),0===e.inProgressMatches.length?null:r.createElement(T.a,{in:!0},r.createElement(R.a,{message:e.inProgressMatches[n].status||e.inProgressMatches[n].homeTeam+" v "+e.inProgressMatches[n].awayTeam,action:r.createElement(b.a,{color:"inherit",size:"small",onClick:function(){return e.showScorecard(e.inProgressMatches[n].id)}},"View scorecard")}))},U=n(402),A=n(18),D=n(403),q=n(398),B=function(e,t,n,r){return new(n||(n=Promise))(function(a,c){function o(e){try{s(r.next(e))}catch(e){c(e)}}function i(e){try{s(r.throw(e))}catch(e){c(e)}}function s(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,i)}s((r=r.apply(e,t||[])).next())})},I=function(e,t){var n,r,a,c,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function i(c){return function(i){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}},F=n(467),J=l()(U.a)(function(e){var t=e.storedMatch&&!e.storedMatch.match.complete&&!Object(q.a)(e.storedMatch.match.date)&&e.userProfile.id===e.storedMatch.match.user,n=Object(D.a)(e.status,e.userProfile)[0];return r.createElement("div",{className:e.classes.rootStyle},r.createElement("div",{className:e.classes.toolbar},n.length>0&&r.createElement(_,{inProgressMatches:n,showScorecard:function(t){return e.history.push("/scorecard"+(t?"/"+t:""))}})),r.createElement(o.a,{className:e.classes.paperStyle},r.createElement(s.a,{container:!0},r.createElement(s.a,{item:!0,sm:6,style:{textAlign:"center"}},r.createElement("img",{src:F,alt:"cricket scorer",className:e.classes.logoStyle})),r.createElement(s.a,{item:!0,sm:6},r.createElement("div",{className:e.classes.mainContentStyle},r.createElement(d.a,{component:"h1",variant:"h3",color:"inherit",gutterBottom:!0},"Cricket scorer"),0===n.length&&r.createElement(d.a,{variant:"h5",color:"inherit",paragraph:!0},"To look at the current matches or start a new match go to the ",r.createElement(C,{className:e.classes.linkStyle,to:"/matchcentre"},"Match Centre")),n.length>0&&r.createElement(r.Fragment,null,r.createElement(d.a,{variant:"h5",color:"inherit"},"There are "+n.length+" matches in progress"),r.createElement(d.a,{variant:"h5",color:"inherit",paragraph:!0},"To view them or start a new match go to the ",r.createElement(C,{className:e.classes.linkStyle,to:"/matchcentre"},"Match Centre"))))))),r.createElement(s.a,{container:!0,spacing:40},r.createElement(s.a,{item:!0,xs:12,md:6},r.createElement(p.a,{className:e.classes.cardStyle},r.createElement("div",{className:e.classes.cardDetailsStyle},r.createElement(v.a,null,r.createElement(d.a,{component:"h2",variant:"h5"},"About Cricket scorer"),r.createElement(d.a,{variant:"subtitle1",paragraph:!0},"Cricket Scorer is a free online cricket scoring application.  Users are able to create matches and score them, the scores and scorecards will be updated in real time in the match centre for anyone to view.  The application can run without an internet connection (although live updates cannot be done with no connection) and can be installed onto devices."))))),r.createElement(s.a,{item:!0,xs:12,md:6},r.createElement(p.a,{className:e.classes.cardStyle},r.createElement("div",{className:e.classes.cardDetailsStyle},r.createElement(v.a,null,r.createElement(d.a,{component:"h2",variant:"h5"},"Matches"),n.length>0&&r.createElement(d.a,{variant:"subtitle1",color:"textSecondary"},"There are "+n.length+" matches in progress"),t&&r.createElement(r.Fragment,null,r.createElement(d.a,{variant:"subtitle1",color:"textSecondary"},"You were scoring the match "+e.storedMatch.match.homeTeam.name+" v "+e.storedMatch.match.awayTeam.name),r.createElement(b.a,{color:"primary",onClick:function(){return B(void 0,void 0,void 0,function(){return I(this,function(t){switch(t.label){case 0:return void 0===e.storedMatch.match.id||e.status!==A.b?[3,2]:[4,e.fetchMatch(e.storedMatch.match.id)];case 1:t.sent(),t.label=2;case 2:return e.history.push("/match/inprogress"),[2]}})})}},"Continue scoring")),r.createElement(d.a,{variant:"subtitle1"},"To see all of the current and past matches"),r.createElement(b.a,{color:"primary",onClick:function(){return e.history.push("/matchcentre")}},"Go to the Match Centre"),r.createElement(d.a,{variant:"subtitle1"},"To start scoring a new match"),r.createElement(b.a,{color:"primary",onClick:function(){return e.history.push("/match/create")}},"Create match")))))),r.createElement("footer",{style:{bottom:0}},r.createElement(d.a,{variant:"subtitle2",color:"inherit"},"Icons made by ",r.createElement("a",{href:"http://www.freepik.com",title:"Freepik"},"Freepik")," from ",r.createElement("a",{href:"https://www.flaticon.com/",title:"Flaticon"},"www.flaticon.com")," is licensed by ",r.createElement("a",{href:"http://creativecommons.org/licenses/by/3.0/",title:"Creative Commons BY 3.0",target:"_blank",rel:"noreferrer"},"CC 3.0 BY"))))}),Y=n(75),K=n(92),L=n(41),G=n(93),H=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};t.default=Object(G.a)(function(e){var t=r.useContext(L.a).setOptions;return r.useEffect(function(){return t({showMatchesLink:!0})},[]),r.createElement(J,H({},e,{storedMatch:Object(Y.a)(localStorage).getMatch(),fetchMatch:Object(K.a)(e.matchApi,Object(Y.a)(localStorage))}))})}}]);